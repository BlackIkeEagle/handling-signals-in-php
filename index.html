<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Handling signals in PHP</title>

		<meta name="description" content="How can and will we handle signals sent to our php 'script/app'">
		<meta name="author" content="Ike Devolder">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta property="og:image" content="http://s3.amazonaws.com/hakim-static/reveal-js/sharer-image.png">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
                    <h1 style="text-align: right;">Handling signals</h1>
                    <h1 style="text-align: right;">in <span style="color: rgb(136, 146, 191);">PHP</span></h1>
				</section>

                <section>

                    <section data-background='assets/signals-from-space.jpg'>
                        <aside class='notes'>
                            <ul>
                                <li>Signals, wtf zijn signals</li>
                                <li>Signals, limited form of ipc</li>
                                <li>Signals, os interrupts target process to deliver signal</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <blockquote cite="http://en.wikipedia.org/wiki/Unix_signal">
                            "Signals are a limited form of inter-process communication used in Unix, Unix-like, and other POSIX-compliant operating systems. A signal is an asynchronous notification sent to a process or to a specific thread within the same process in order to notify it of an event that occurred. Signals have been around since the 1970s Bell Labs Unix and have been more recently specified in the POSIX standard."
                        </blockquote>
                        <p><small><a href="http://en.wikipedia.org/wiki/Unix_signal">http://en.wikipedia.org/wiki/Unix_signal</a></small></p>
                        <aside class='notes'>
                            <ul>
                                <li>You can read this later</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <blockquote cite="http://en.wikipedia.org/wiki/Unix_signal">
                            "When a signal is sent, the operating system interrupts the target process's normal flow of execution to deliver the signal. Execution can be interrupted during any non-atomic instruction. If the process has previously registered a signal handler, that routine is executed. Otherwise, the default signal handler is executed."
                        </blockquote>
                        <p><small><a href="http://en.wikipedia.org/wiki/Unix_signal">http://en.wikipedia.org/wiki/Unix_signal</a></small></p>
                        <aside class='notes'>
                            <ul>
                                <li>You can read this later</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <h2>Some known ways to send signals</h2>
                        <ul style="float: left">
                            <li class="fragment">Ctrl-C</li>
                            <li class="fragment">Ctrl-Z</li>
                            <li class="fragment">Ctrl-\</li>
                            <li class="fragment">The <span class='highlight'>kill</span> command</li>
                        </ul>
                        <aside class='notes'>
                            <ul>
                                <li>Ctrl-C sends INT signal (SIGINT) terminating the running process</li>
                                <li>Ctrl-Z sends TSTP signal (SIGTSTP) suspending the running process</li>
                                <li>Ctrl-\ sends QUIT signal (SIGQUIT) terminating the running process and normally dumping core</li>
                                <li>The kill command / kill -s SIGNAL PID</li>
                            </ul>
                        </aside>
                    </section>

                </section>

                <section>

                    <section data-background='assets/wave.jpg'>
                        <aside class='notes'>
                            <ul>
                                <li>Now we will go to the point we will handle signals</li>
                                <li>What can we handle in PHP</li>
                                <li>and how we will do it</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <h2>Signals we can catch in <span style="color: rgb(136, 146, 191);">PHP</span></h2>
                        <div>
                            <div class="fragment" style="width: 48%; display: inline-block; margin-right: 2%; vertical-align: top;">
                                <ul>
                                    <li>SIGHUP</li>
                                    <li>SIGINT</li>
                                    <li>SIGUSR1</li>
                                    <li>SIGUSR2</li>
                                    <li>SIGQUIT</li>
                                    <li>SIGILL</li>
                                    <li>SIGABRT</li>
                                    <li>SIGFPE</li>
                                    <li>SIGSEGV</li>
                                </ul>
                            </div>
                            <div class="fragment" style="width: 48%; display: inline-block;">
                                <ul>
                                    <li>SIGPIPE</li>
                                    <li>SIGALRM</li>
                                    <li>SIGTERM</li>
                                    <li>SIGCHLD</li>
                                    <li>SIGCONT</li>
                                    <li>SIGTSTP</li>
                                    <li>SIGTTIN</li>
                                    <li>SIGTTOU</li>
                                </ul>
                            </div>
                        </div>
                        <aside class='notes'>
                            <ul>
                                <li>There are 17 signals we can catch</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <h2 style="color: rgb(136, 146, 191);">Ticks</h2>
                        <p class="fragment">
                           can be described as events that can happen between the normal execution of the code 
                        </p>
                        <p>
                        <br />
                        </p>
                        <div style="width: 62%; display: inline-block; margin-right: 2%; vertical-align: top;"></div>
                        <div style="width: 35%; display: inline-block;">
                            <div class="fragment" style="text-align: left">
                                <span style="color: #5FBA7A">declare</span>(ticks = <span style="color: #BA5F9F">1</span>);
                            </div>
                            <p>
                            </p>
                            <div class="fragment" style="text-align: left">
                                <span style="color: #5FBA7A">declare</span>(ticks = <span style="color: #BA5F9F">1</span>) {
                                <br />
                                <span style="color: #5F9FBA">&nbsp;&nbsp;&nbsp;&nbsp;&sol;&sol; in scope</span>
                                <br />
                                }
                                <br />
                                <span style="color: #5F9FBA">&sol;&sol; out scope</span>
                            </div>
                        </div>
                        <aside class='notes'>
                            <ul>
                                <li>first declare ticks</li>
                                <li>tick is event on every X low level statements</li>
                                <li>not everything is tickable</li>
                                <li>declare for entire file</li>
                                <li>for specific scope</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <blockquote cite="http://php.net/manual/en/control-structures.declare.php">
                            "A tick is an event that occurs for every N low-level tickable statements executed by the parser within the declare block. The value for N is specified using ticks=N within the declare block's directive section.
                        </blockquote>
                        <blockquote cite="http://php.net/manual/en/control-structures.declare.php">
                            "Not all statements are tickable. Typically, condition expressions and argument expressions are not tickable."
                        </blockquote>
                        <p><small><a href="http://php.net/manual/en/control-structures.declare.php">http://php.net/manual/en/control-structures.declare.php</a></small></p>
                        <aside class='notes'>
                            <ul>
                                <li>You can read this later</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <h2 style="color: rgb(136, 146, 191);">Ticks</h2>
                        <p class="fragment" style="text-align: left;">
                            ticks set to a low value gives you much control but has a performance impact
                        </p>
                        <p>
                        <br />
                        </p>
                        <p class="fragment" style="text-align: right;">
                            ticks set to a  high value give you less control but impact performance less
                        </p>
                        <aside class='notes'>
                            <ul>
                                <li>1 is the lowest, at every possible tick</li>
                                <li>higher will lead to slower response to the signal</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <h2>Alternative</h2>
                        <p class="fragment" style="text-align: left;">You can manually set in your code when the signals can be handled</p>
                        <p>
                        <br />
                        </p>
                        <div style="width: 62%; display: inline-block; margin-right: 2%; vertical-align: top;"></div>
                        <div style="width: 35%; display: inline-block;">
                            <div class="fragment" style="text-align: left">
                                <span style="color: #5FBA7A">pcntl_signal_dispatch</span>();
                            </div>
                        </div>
                        <aside class='notes'>
                            <ul>
                                <li>there is no need to declare ticks when you use pcntl_signal_dispatch</li>
                            </ul>
                        </aside>
                    </section>

                </section>

				<section>
                    <div style="width: 50%; display: inline-block; margin-right: 2%; vertical-align: top;">
					<h2>Thanks.</h2>
					<p style="text-align: left;"><a href="https://joind.in/14176">https://joind.in/14176</a></p>
                    </div>
                    <div style="width: 46%; display: inline-block;">
                        <img src="assets/joindin-handling-signals-in-php.png" alt="joindin qr" style="width: 40%" />
                    </div>
					<p><br /></p>
					<h2>Ike Devolder</h2>
					<p style="text-align: left;">@BlackIkeEagle</p>
					<p style="text-align: left;">Senior Webdeveloper - Studio Emma</p>
					<p style="text-align: left;">Archlinux Trusted User</p>
				</section>

                <section>
                    <h2>Credits</h2>
                    <ul>
                    </ul>
                </section>

			</div>

		</div>

        <script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
